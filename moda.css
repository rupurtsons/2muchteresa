/* =========================
   Base
========================= */
:root{
  --bg: rgb(224, 225, 222);
  --ink: rgb(6, 20, 98);
  --muted: rgba(6, 20, 98, 0.25);
  --cream: rgb(185, 183, 164);
}

body{
  background: var(--bg);
  margin: 0;
  padding: 0;
  overflow: hidden; /* moda pages use their own scroller (#textScroll) */
  font-family: "alte-haas-grotesk-regular", serif;
  color: var(--ink);
}

/* hide real cursor inside this popup page */
html, body, * { cursor: none !important; }

/* gif cursor */
#gifCursor{
  position: fixed;
  left: 0;
  top: 0;
  width: 60px;
  height: auto;
  pointer-events: none;
  z-index: 10000000;
  transform: translate(-50%, -50%);
  display: none;
}
/* if you still use this class somewhere */
body.inModal{
  padding: 0;
  margin: 0;
  overflow: hidden;
}

/* =========================
   Modal (main site)
========================= */
.modalOverlay{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
.modalOverlay.isOpen{ display: flex; }

.modalWindow{
  width: min(80vw, 720px);
  height: min(80vh, 720px);
  background: var(--bg);
  border-radius: 18px;
  overflow: hidden;
  position: relative;
  box-shadow: 0 20px 60px rgba(0,0,0,0.35);
}

.modalClose{
  position: absolute;
  top: 10px;
  right: 12px;
  width: 36px;
  height: 36px;
  border: none;
  border-radius: 999px;
  background: rgba(0,0,0,0.35);
  color: white;
  font-size: 22px;
  line-height: 36px;
  cursor: pointer;
  z-index: 2;
}

.modalFrame{
  width: 100%;
  height: 100%;
  border: none;
  display: block;
  background: white;
}

/* =========================
   Scrollable diary area
========================= */
#textScroll{
  position: fixed;
  inset: 0;
  overflow-y: auto;
  overflow-x: hidden;

  /* change these if you want more/less margins */
  padding: 80px 8vw;
  box-sizing: border-box;

  scrollbar-width: thin;
  z-index: 1;
}

#textScroll::-webkit-scrollbar{ width: 6px; }
#textScroll::-webkit-scrollbar-thumb{
  background: var(--ink);
  border-radius: 10px;
}

/* coordinate space for anchored floating boxes */
#scrollInner{
  position: relative;
  min-height: 100%;
}

/* keep your diary text readable */
#textScroll p{
  max-width: 760px;
  margin: 0 auto;
  line-height: 1.6;
}

/* =========================
   Funky text styling
========================= */
.funky{
  font-family: "alte-haas-grotesk-bold", serif;
  font-size: 4vmin;
  text-transform: lowercase;
  color: var(--ink);
  text-align: center;
  max-width: 70vw;
  margin: 0 auto;
  line-height: 1.2;
}

.word{
  display: block;
  margin-bottom: 0.6em;
}

.letter{
  display: inline-block;
  transition: transform 0.2s ease;
  transform:
    translate(calc(var(--x, 0) * 1%), calc(var(--y, 0) * 1%))
    rotate(calc(var(--r, 0) * 1deg))
    scale(var(--s, 1));
}

/* =========================
   Floating image boxes
   (scroll WITH text)
========================= */
.box{
  /* IMPORTANT: JS positions these with transform translate3d */
  position: absolute;
  left: 0;
  top: 0;

  padding: 0;
  width: clamp(140px, 18vw, 260px);
  aspect-ratio: 1 / 1;

  background: transparent;
  border: none;
  overflow: hidden;
  border-radius: 24px;

  z-index: 10;
}

/* image fills box */
.box img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* wrapper used in your HTML */
.imgWrap{
  display: block;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

/* dim when frozen */
.box.caught img{
  filter: brightness(0.45);
}

/* WORD ONLY â€” no overlay, no tint, no blend tricks */
.box::after{
  content: attr(data-word);
  position: absolute;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;

  background: transparent;
  color: var(--ink);

  font-family: "alte-haas-grotesk-bold", serif;
  font-size: 16px;
  text-align: center;
  padding: 12px;            /* makes longer sentences fit nicer */
  line-height: 1.25;

  pointer-events: none;
  opacity: 0;
  transition: opacity .25s ease;
}

.box:hover::after{ opacity: 1; }

/* vibrate on hover (single clean version) */
.box:hover .imgWrap{
  animation: vibrate 0.15s infinite;
  filter: brightness(0.5);
}

/* vibrate keyframes */
@keyframes vibrate{
  0%   { transform: translate(0, 0); }
  20%  { transform: translate(-1px, 1px); }
  40%  { transform: translate(1px, -1px); }
  60%  { transform: translate(-1px, -1px); }
  80%  { transform: translate(1px, 1px); }
  100% { transform: translate(0, 0); }
}

/* =========================
   Optional: your old "intlay" styles
========================= */
.intlayone{
  border-radius: 25px;
  background-color: var(--ink);
}

.intlaytwo{
  border-radius: 25px;
  background-color: var(--cream);
}

/* =========================
   Image zoom overlay
   (JS creates inline styles but this helps)
========================= */
#imageOverlay{
  /* position: fixed; */
  inset: 0;
  background: rgba(224, 225, 222, 0.95);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 99999;
}

#imageOverlayImg{
  max-width: 90vw;
  max-height: 90vh;
  object-fit: contain;
}

.inlineImage{
  position: relative;   /* NOT absolute */
  display: block;
  margin: 40px auto;    /* space around image */
  width: 260px;
}

.box.inlineImage{
  width: min(320px, 70vw);
  aspect-ratio: auto;
  overflow: visible;
}

.box.inlineImage img{
  width: 100%;
  height: auto;
  object-fit: contain;
  display: block;
}